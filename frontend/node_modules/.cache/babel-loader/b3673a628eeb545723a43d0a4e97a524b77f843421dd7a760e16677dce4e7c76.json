{"ast":null,"code":"import axios from 'axios';\nconst API_URL = 'http://localhost:8000/api';\nconst getAuthHeader = () => {\n  const token = localStorage.getItem('token');\n  if (!token) {\n    throw new Error('No authentication token found');\n  }\n  return {\n    'Authorization': `Bearer ${token}`,\n    'Content-Type': 'application/json'\n  };\n};\nexport const getChatHistory = async () => {\n  try {\n    const response = await axios.get(`${API_URL}/chats`, {\n      headers: getAuthHeader()\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response;\n    if (axios.isAxiosError(error) && ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    throw error;\n  }\n};\nexport const sendMessage = async message => {\n  try {\n    const response = await axios.post(`${API_URL}/chat`, {\n      message\n    }, {\n      headers: getAuthHeader()\n    });\n    return response.data;\n  } catch (error) {\n    var _error$response2;\n    if (axios.isAxiosError(error) && ((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) === 401) {\n      localStorage.removeItem('token');\n      window.location.href = '/login';\n    }\n    throw error;\n  }\n};","map":{"version":3,"names":["axios","API_URL","getAuthHeader","token","localStorage","getItem","Error","getChatHistory","response","get","headers","data","error","_error$response","isAxiosError","status","removeItem","window","location","href","sendMessage","message","post","_error$response2"],"sources":["C:/TesCode/aichat/frontend/src/services/chatService.ts"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst API_URL = 'http://localhost:8000/api';\r\n\r\nexport interface ChatMessage {\r\n    message: string;\r\n}\r\n\r\nexport interface ChatResponse {\r\n    id: number;\r\n    message: string;\r\n    response: string;\r\n    created_at: string;\r\n}\r\n\r\nconst getAuthHeader = () => {\r\n    const token = localStorage.getItem('token');\r\n    if (!token) {\r\n        throw new Error('No authentication token found');\r\n    }\r\n    return {\r\n        'Authorization': `Bearer ${token}`,\r\n        'Content-Type': 'application/json'\r\n    };\r\n};\r\n\r\nexport const getChatHistory = async (): Promise<ChatResponse[]> => {\r\n    try {\r\n        const response = await axios.get(\r\n            `${API_URL}/chats`,\r\n            {\r\n                headers: getAuthHeader()\r\n            }\r\n        );\r\n        return response.data;\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n            localStorage.removeItem('token');\r\n            window.location.href = '/login';\r\n        }\r\n        throw error;\r\n    }\r\n};\r\n\r\nexport const sendMessage = async (message: string): Promise<ChatResponse> => {\r\n    try {\r\n        const response = await axios.post(\r\n            `${API_URL}/chat`,\r\n            { message },\r\n            {\r\n                headers: getAuthHeader()\r\n            }\r\n        );\r\n        return response.data;\r\n    } catch (error) {\r\n        if (axios.isAxiosError(error) && error.response?.status === 401) {\r\n            localStorage.removeItem('token');\r\n            window.location.href = '/login';\r\n        }\r\n        throw error;\r\n    }\r\n}; "],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,OAAO,GAAG,2BAA2B;AAa3C,MAAMC,aAAa,GAAGA,CAAA,KAAM;EACxB,MAAMC,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAC3C,IAAI,CAACF,KAAK,EAAE;IACR,MAAM,IAAIG,KAAK,CAAC,+BAA+B,CAAC;EACpD;EACA,OAAO;IACH,eAAe,EAAE,UAAUH,KAAK,EAAE;IAClC,cAAc,EAAE;EACpB,CAAC;AACL,CAAC;AAED,OAAO,MAAMI,cAAc,GAAG,MAAAA,CAAA,KAAqC;EAC/D,IAAI;IACA,MAAMC,QAAQ,GAAG,MAAMR,KAAK,CAACS,GAAG,CAC5B,GAAGR,OAAO,QAAQ,EAClB;MACIS,OAAO,EAAER,aAAa,CAAC;IAC3B,CACJ,CAAC;IACD,OAAOM,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAC,eAAA;IACZ,IAAIb,KAAK,CAACc,YAAY,CAACF,KAAK,CAAC,IAAI,EAAAC,eAAA,GAAAD,KAAK,CAACJ,QAAQ,cAAAK,eAAA,uBAAdA,eAAA,CAAgBE,MAAM,MAAK,GAAG,EAAE;MAC7DX,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC;MAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACnC;IACA,MAAMP,KAAK;EACf;AACJ,CAAC;AAED,OAAO,MAAMQ,WAAW,GAAG,MAAOC,OAAe,IAA4B;EACzE,IAAI;IACA,MAAMb,QAAQ,GAAG,MAAMR,KAAK,CAACsB,IAAI,CAC7B,GAAGrB,OAAO,OAAO,EACjB;MAAEoB;IAAQ,CAAC,EACX;MACIX,OAAO,EAAER,aAAa,CAAC;IAC3B,CACJ,CAAC;IACD,OAAOM,QAAQ,CAACG,IAAI;EACxB,CAAC,CAAC,OAAOC,KAAK,EAAE;IAAA,IAAAW,gBAAA;IACZ,IAAIvB,KAAK,CAACc,YAAY,CAACF,KAAK,CAAC,IAAI,EAAAW,gBAAA,GAAAX,KAAK,CAACJ,QAAQ,cAAAe,gBAAA,uBAAdA,gBAAA,CAAgBR,MAAM,MAAK,GAAG,EAAE;MAC7DX,YAAY,CAACY,UAAU,CAAC,OAAO,CAAC;MAChCC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,QAAQ;IACnC;IACA,MAAMP,KAAK;EACf;AACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}